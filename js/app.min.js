"use strict";!function(t,e){function r(t,e){r.modules[t]=e}function n(t){for(var e=t.split("/"),r=[],n=0;n<e.length;n++)"."==e[n]||(".."==e[n]?r.pop():r.push(e[n]));return r.join("/")}function o(t,e){return t?t.trim().replace(/\/*$/,"/")+e.trim():e.trim()}function i(t){return t?t.split("/").slice(0,-1).join("/"):null}function a(t,s){if(s=n(o(i(t),s)),s in r.exports)return r.exports[s];if(!(s in r.modules))throw new Error("Module not defined: "+s);var u=r.modules[s];if("function"==typeof u){var c={},l=u(a.bind(null,s),c,{id:s,uri:""});u=l!==e?l:c}return r.exports[s]=u}r.modules={},r.exports={};var s=a.bind(null,null);r("l20n/html",function(e){function r(t,e){return document.readyState===t?e():void document.addEventListener("readystatechange",function(){document.readyState===t&&e()})}function n(t){w&&(t.addEventListener("error",console.error.bind(console)),t.addEventListener("warning",console.warn.bind(console))),t.localizeNode=function(t){for(var e=h(t),r=O.extend(e.ids),n=0;n<e.nodes.length;n++)d(e.nodes[n],e.ids[n],r.entities[e.ids[n]])},t.once=function(t){if(T)t();else{var e=function r(){document.removeEventListener("DocumentLocalized",r),t()};document.addEventListener("DocumentLocalized",e)}},document.l10n=t}function o(){var t=document.head,e=t.querySelector('script[type="application/l10n-data+json"]');e&&L.updateData(JSON.parse(e.textContent));var r=t.querySelector('link[rel="localization"]');if(r)return i(r.href),f();var n=t.querySelectorAll('script[type="application/l20n"]');if(n.length){for(var o=0;o<n.length;o++)n[o].hasAttribute("src")?L.linkResource(n[o].src):L.addResource(n[o].textContent);return L.requestLocales(),f()}console.error("L20n: No resources found. (Put them above l20n.js.)")}function i(t){E.load(t,function(e,r){var n=a(r,t);u(n)})}function a(t,e){var r=JSON.parse(t);return r.resources=r.resources.map(c.bind(this,e)),r}function s(t){document.documentElement.lang=t,document.documentElement.dir=-1===C.indexOf(t)?"ltr":"rtl"}function u(t){L.registerLocales(t.default_locale,t.locales),L.registerLocaleNegotiator(function(t,r,n){var o=e("./intl").Intl,i=o.prioritizeLocales(t,r,n);return s(i[0]),i});var r=/{{\s*locale\s*}}/;return t.resources.forEach(function(t){L.linkResource(r.test(t)?t.replace.bind(t,r):t)}),L.requestLocales(navigator.language||navigator.browserLanguage),t}function c(t,e){if(A.test(e))return e;var r=t.split("/").slice(0,-1).concat(e.split("/")).filter(function(t){return"."!==t});return r.join("/")}function l(){var t=document.createEvent("Event");t.initEvent("DocumentLocalized",!1,!1),document.dispatchEvent(t)}function f(){var t=h(document);O=L.localize(t.ids,function(e){t||(t=h(document));for(var r=0;r<t.nodes.length;r++)d(t.nodes[r],t.ids[r],e.entities[t.ids[r]]);"locales"in e.reason&&e.reason.locales.length&&s(e.reason.locales[0]),t=null,T||(T=!0,l())})}function h(t){var e=t.querySelectorAll("[data-l10n-id]"),r=[];t.hasAttribute&&t.hasAttribute("data-l10n-id")&&(e=Array.prototype.slice.call(e),e.push(t));for(var n=0;n<e.length;n++)r.push(e[n].getAttribute("data-l10n-id"));return{ids:r,nodes:e}}function p(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).replace(/^-/,"")}function d(t,e,r){if(r){if(r.value)if(-1===r.value.indexOf("<")&&-1===r.value.indexOf("&")||!k&&"function"!=typeof x.shims.getTemplate)t.textContent=r.value;else{var n=k?document.createElement("template"):x.shims.getTemplate();n.innerHTML=r.value,v(t,n.content)}Object.keys(r.attributes).forEach(function(e){var n=p(e);b({name:n},t)&&t.setAttribute(n,r.attributes[e])})}}function v(t,e){for(var r,n=document.createDocumentFragment();r=e.childNodes[0];)if(e.removeChild(r),r.nodeType!==Node.TEXT_NODE){var o=g(t,r);if(o)v(o,r),n.appendChild(o);else if(y(r)){for(var i,a=0;i=r.attributes[a];a++)b(i,r)||r.removeAttribute(i.name);n.appendChild(r)}else{var s=document.createTextNode(r.textContent);n.appendChild(s)}}else n.appendChild(r);if(t.textContent="",t.appendChild(n),e.attributes)for(var i,a=0;i=e.attributes[a];a++)b(i,t)&&t.setAttribute(i.name,i.value)}function y(t){return-1!==_.elements.indexOf(t.tagName.toLowerCase())}function b(t,e){var r=t.name.toLowerCase(),n=e.tagName.toLowerCase();if(-1!==_.attributes.global.indexOf(r))return!0;if(!_.attributes[n])return!1;if(-1!==_.attributes[n].indexOf(r))return!0;if("input"===n&&"value"===r){var o=e.type.toLowerCase();if("submit"===o||"button"===o||"reset"===o)return!0}return!1}function g(t,e){for(var r,n=m(e),o=0,i=0;r=t.children[i];i++)if(r.nodeType===Node.ELEMENT_NODE&&r.tagName===e.tagName){if(o===n)return r;o++}return null}function m(t){for(var e,r=0;e=t.previousElementSibling;)e.tagName===t.tagName&&r++;return r}var w=!1,x=e("../l20n"),E=e("./platform/io");x.shims={};var A=/^\/|:/,C=["ar","fa","he","ps","ur"],_={elements:["a","em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","ruby","rt","rp","bdi","bdo","span","br","wbr"],attributes:{global:["title","aria-label"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]}},k="content"in document.createElement("template"),L=x.getContext(document.location.host);n(L);var O,T=!1;return"complete"===document.readyState?t.setTimeout(o):r("interactive",o),x}),r("l20n",function(t,e){var r=t("./l20n/context").Context,n=t("./l20n/parser").Parser,o=t("./l20n/compiler").Compiler;e.Context=r,e.Parser=n,e.Compiler=o,e.getContext=function(t){return new r(t)}}),r("l20n/context",function(t,r){function n(t,r){function o(t,o,c){function l(t,n){return t?o(t):(n!==e&&(s.source=n),s.ast=r.parse(s.source),void f())}function f(){function e(t){return t?o(t):(l--,void(0===l&&h()))}var a=s.ast.body.filter(function(t,e){return"ImportStatement"===t.type?(u.push(e),!0):!1});a.forEach(function(t){var e=i(t.uri.content),o=new n(e,r);s.resources.push(o)});var l=s.resources.length;return 0===l?o():void s.resources.forEach(function(r){r.build(t+1,e,c)})}function h(){for(var t=s.resources.length-1;t>=0;t--){var e=u[t]||0;Array.prototype.splice.apply(s.ast.body,[e,1].concat(s.resources[t].ast.body))}o()}return t>=7?o(new a("Too many nested imports.")):s.source?setTimeout(function(){l()}):void p.load(s.id,l,c)}function i(t){if(null===s.id||c.test(t))return t;var e=s.id.split("/").slice(0,-1).concat(t.split("/")).filter(function(t){return"."!==t});return e.join("/")}var s=this;this.id=t,this.resources=[],this.source=null,this.ast={type:"L20n",body:[]},this.build=o;var u=[],c=/^\/|:/}function o(t,r,n,o){function i(t){function e(t){t&&(l++,o.emit(t instanceof a?"error":"warning",t)),u--,0===u&&(l===c.resources.length&&o.emit("error",new a("Locale has no valid resources")),r())}function r(){c.ast.body=c.resources.reduce(function(t,e){return t.concat(e.ast.body)},c.ast.body),i()}function i(){c.entries=n.compile(c.ast),c.isReady=!0,t&&t()}if(!t)var s=!0;var u=c.resources.length;if(0===u)throw new a("Locale has no resources");var l=0;c.resources.forEach(function(t){t.build(0,e,s)})}function s(t){return this.entries.hasOwnProperty(t)?this.entries[t]:e}function u(t){return this.resources.some(function(e){return e.id===t})}this.id=t,this.resources=[],this.entries=null,this.ast={type:"L20n",body:[]},this.isReady=!1,this.build=i,this.getEntry=s,this.hasResource=u;var c=this}function i(r){function i(t,r){Object.keys(r).forEach(function(n){r[n]===e?delete t[n]:null===r[n]||"object"!=typeof r[n]?t[n]=r[n]:("object"!=typeof t[n]&&(t[n]={}),i(t[n],r[n]))})}function p(t){if(!t||"object"!=typeof t)throw new a("Context data must be a non-null object");i(G,t)}function d(t,e){if(!V)throw new a("Context not ready");return w.call(Y,0,t,e).value}function v(t,e){if(!V)throw new a("Context not ready");return w.call(Y,0,t,e)}function y(t,e){if(!e)throw new a("No callback passed");return g.call(Y,t,e)}function b(t){V&&setTimeout(function(){t()}),z("ready",t)}function g(t,e,r){var n={extend:function(r){for(var n=0;n<r.length;n++)-1===t.indexOf(r[n])&&t.push(r[n]);if(V){var o=m.call(this,r);return X.bindGet({id:e,callback:g.bind(this,t,e),globals:Object.keys(o.globalsUsed)},!0),o}}.bind(this),stop:function(){X.unbindGet(e)}.bind(this)};if(!V)return X.bindGet({id:e,callback:g.bind(this,t,e),globals:[]}),n;var o=m.call(this,t),i={entities:o.entities,reason:r||{locales:B.slice()},stop:function(){X.unbindGet(e)}};return X.bindGet({id:e,callback:g.bind(this,t,e),globals:Object.keys(o.globalsUsed)}),e(i),n}function m(t){for(var e,r={entities:{},globalsUsed:{}},n=0;e=t[n];n++){r.entities[e]=v.call(this,e);for(var o in r.entities[e].globals)r.entities[e].globals.hasOwnProperty(o)&&(r.globalsUsed[o]=!0)}return r}function w(t,r,n,o){var i=this,a=!0;t:for(;a;){d=v=y=b=m=void 0,a=!1;var c=t,l=r,h=n,p=o,d=B[c];if(!d)return P(new s("Unable to get translation",l,B)),{value:p?p.source:l,attributes:{},globals:{},locale:p?p.loc:null};var v=O(d);v.isReady||v.build(null);var y=v.getEntry(l);if(y!==e){var b;try{b=y.get(x.call(i,h))}catch(g){if(g instanceof f.RuntimeError){if(P(new u(g.message,l,B,v)),g instanceof f.ValueError){var m=p||{source:g.source,loc:v.id};t=c+1,r=l,n=h,o=m,a=!0;continue t}t=c+1,r=l,n=h,o=p,a=!0;continue t}throw P(g)}return b.locale=v.id,b}N(new u("Not found",l,B,v)),t=c+1,r=l,n=h,o=p,a=!0}}function x(t){if(!t)return G;var e={};return i(e,G),i(e,t),e}function E(t){if(W)throw new a("Context is frozen");H.push(["text",t])}function A(t,e){var r=new n(null,J);r.source=t,e.resources.push(r)}function C(t){if(W)throw new a("Context is frozen");H.push(["function"==typeof t?"template":"uri",t])}function _(t,e){if(!e.hasResource(t)){var r=new n(t,J);e.resources.push(r)}}function k(t,r){if(W)throw new a("Context is frozen");t!==e&&(U=t,D=[],r||(r=[]),r.push(t),r.forEach(function(t){if("string"!=typeof t)throw new a("Language codes must be strings");-1===D.indexOf(t)&&D.push(t)}))}function L(t){if(W)throw new a("Context is frozen");R=t}function O(t){if(q[t])return q[t];var e=new o(t,J,F,Z);q[t]=e;for(var r=0;r<H.length;r++){var n=H[r];"text"===n[0]?A(n[1],e):"uri"===n[0]?_(n[1],e):_(n[1](e.id),e)}return e}function T(){if(W&&!V)throw new a("Context not ready");if(0===H.length)return void N(new a("Context has no resources; not freezing"));if(W=!0,M=Array.prototype.slice.call(arguments),M.length&&M.forEach(function(t){if("string"!=typeof t)throw new a("Language codes must be strings")}),!R){var e=t("./intl").Intl;R=e.prioritizeLocales}var r=R(D,M,U,j);r&&j(r)}function j(t){var e=O(t[0]);e.isReady?S(t):e.build(S.bind(null,t))}function S(t){B=t,V=!0,X.all(B.slice()),Z.emit("ready")}function z(t,e){Z.addEventListener(t,e)}function I(t,e){Z.removeEventListener(t,e)}function N(t){return Z.emit("warning",t),t}function P(t){return Z.emit("error",t),t}this.id=r,this.registerLocales=k,this.registerLocaleNegotiator=L,this.requestLocales=T,this.addResource=E,this.linkResource=C,this.updateData=p,this.getSync=d,this.getEntitySync=v,this.localize=y,this.ready=b,this.addEventListener=z,this.removeEventListener=I,Object.defineProperty(this,"supportedLocales",{get:function(){return B.slice()},enumerable:!0});var R,G={},U="i-default",D=[U],M=[],B=[],q={},H=[],V=!1,W=!1,Z=new c,J=new l,F=new f,X=new h,Y=this;J.addEventListener("error",P),F.addEventListener("error",N),F.setGlobals(X.globals)}function a(t){this.name="ContextError",this.message=t}function s(t,e,r){a.call(this,t),this.name="RuntimeError",this.entity=e,this.supportedLocales=r.slice(),this.message=e+": "+t+"; tried "+r.join(", ")}function u(t,e,r,n){s.call(this,t,e,r),this.name="TranslationError",this.locale=n.id,this.message="["+this.locale+"] "+e+": "+t}var c=t("./events").EventEmitter,l=t("./parser").Parser,f=t("./compiler").Compiler,h=t("./retranslation").RetranslationManager;t("./platform/globals");var p=t("./platform/io");i.Error=a,i.RuntimeError=s,i.TranslationError=u,a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,s.prototype=Object.create(a.prototype),s.prototype.constructor=s,u.prototype=Object.create(s.prototype),u.prototype.constructor=u,r.Context=i}),r("l20n/events",function(t,e){function r(){this._listeners={}}r.prototype.emit=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();if(!this._listeners[e])return!1;for(var r=this._listeners[e].slice(),n=0;n<r.length;n++)r[n].apply(this,t);return!0},r.prototype.addEventListener=function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this},r.prototype.removeEventListener=function(t,e){var r=this._listeners[t];if(!r)return this;var n=r.indexOf(e);return-1===n?this:(r.splice(n,1),this)},e.EventEmitter=r}),r("l20n/parser",function(t,r){function n(t){function r(){X+=2;var t=X,e=F.indexOf("*/",t);if(-1===e)throw Z("Comment without closing tag");return X=e+2,{type:"Comment",content:F.slice(t,e)}}function n(){for(var t,e,r,n=[];t=s("Attribute"),t.local="_"===t.key.name.charAt(0),n.push(t),e=p(),r=F.charAt(X),">"!==r;)if(!e)throw Z('Expected ">"');return n}function a(t){var e=y();if(d(),":"!==F.charAt(X))throw Z('Expected ":"');return++X,d(),{type:t,key:e,value:h()}}function s(t){var e=y(),r=[];if("["===F.charAt(X)&&(++X,d(),r=W(k,"]")),d(),":"!==F.charAt(X))throw Z('Expected ":"');return++X,d(),{type:t,key:e,value:h(),index:r}}function u(){++X,d();for(var t,e,r,n=[],o=!1;;){if(t=!1,"*"===F.charAt(X)){if(++X,o)throw Z("Default item redefinition forbidden");t=!0,o=!0}if(e=a("HashItem"),e["default"]=t,n.push(e),d(),r=","===F.charAt(X),r&&(++X,d()),"}"===F.charAt(X)){++X;break}if(!r)throw Z('Expected "}"')}return{type:"Hash",content:n}}function c(){var t,e=F.charAt(++X);if("u"===e){for(var r="",n=0;4>n;n++){if(e=F[++X],t=e.charCodeAt(0),!(t>96&&103>t||t>64&&71>t||t>47&&58>t))throw Z("Illegal unicode escape sequence");r+=e}return String.fromCharCode(parseInt(r,16))}return e}function l(t,e){var r,n=null,o="",i=0;X+=e-1;var a=X+1;t:for(;;)switch(r=F.charAt(++X)){case"\\":o+=c();break;case"{":if("{"===F.charAt(X+1)){if(null===n&&(n=[]),i>Q-1)throw Z("Too many placeables, maximum allowed is "+Q);if(o&&n.push({type:"String",content:o}),X+=2,d(),n.push(k()),d(),"}"!==F.charAt(X)||"}"!==F.charAt(X+1))throw Z('Expected "}}"');X+=1,i++,o="";break}default:if(1===e){if(r===t){X++;break t}}else if(r===t[0]&&F.charAt(X+1)===r&&F.charAt(X+2)===r){X+=3;break t}if(o+=r,X+1>=Y)throw Z("Unclosed string literal")}return null===n?{type:"String",content:o}:(o.length&&n.push({type:"String",content:o}),{type:"ComplexString",content:n,source:F.slice(a,X-e)})}function f(t,e){var r,n,o,i=F.indexOf(t,X+e);if(-1===i)throw Z("Unclosed string literal");return o=F.slice(X+e,i),r=o.indexOf("{{"),-1!==r?l(t,e):(n=o.indexOf("\\"),-1!==n?l(t,e):(X=i+e,{type:"String",content:o}))}function h(t,r){if(r===e&&(r=F.charAt(X)),"'"===r||'"'===r)return r===F.charAt(X+1)&&r===F.charAt(X+2)?f(r+r+r,3):f(r,1);if("{"===r)return u();if(!t)throw Z("Unknown value type");return null}function p(){for(var t=X,e=F.charCodeAt(t);32===e||10===e||9===e||13===e;)e=F.charCodeAt(++X);return X!==t}function d(){for(var t=F.charCodeAt(X);32===t||10===t||9===t||13===t;)t=F.charCodeAt(++X)}function v(){return++X,{type:"VariableExpression",id:y()}}function y(){var t=X,e=t,r=F,n=r.charCodeAt(e);if((97>n||n>122)&&(65>n||n>90)&&95!==n)throw Z("Identifier has to start with [a-zA-Z_]");for(n=r.charCodeAt(++t);n>=97&&122>=n||n>=65&&90>=n||n>=48&&57>=n||95===n;)n=r.charCodeAt(++t);return X=t,{type:"Identifier",name:r.slice(e,t)}}function b(){if(X+=6,"("!==F.charAt(X))throw Z('Expected "("');++X,d();var t=f(F.charAt(X),1);if(d(),")"!==F.charAt(X))throw Z('Expected ")"');return++X,{type:"ImportStatement",uri:t}}function g(t){if("_"===t.name.charAt(0))throw Z('Macro ID cannot start with "_"');++X;var e=W(v,")");if(p(),"{"!==F.charAt(X))throw Z('Expected "{"');++X,d();var r=k();if(d(),"}"!==F.charAt(X))throw Z('Expected "}"');if(++X,d(),62!==F.charCodeAt(X))throw Z('Expected ">"');return++X,{type:"Macro",id:t,args:e,expression:r}}function m(t,e){if(!p())throw Z("Expected white space");var r=F.charAt(X),o=h(!0,r),i=null;if(null===o){if(">"===r)throw Z('Expected ">"');i=n()}else{var a=p();if(">"!==F.charAt(X)){if(!a)throw Z('Expected ">"');i=n()}}return++X,{type:"Entity",id:t,value:o,index:e,attrs:i,local:95===t.name.charCodeAt(0)}}function w(){var t=F.charCodeAt(X);if(60===t){++X;var e=y();return t=F.charCodeAt(X),40===t?g(e):91===t?(++X,m(e,W(k,"]"))):m(e,null)}if(47===F.charCodeAt(X)&&42===F.charCodeAt(X+1))return r();if("import"===F.slice(X,X+6))return b();throw Z("Invalid entry")}function x(){var t=[];for(d();Y>X;){try{t.push(w())}catch(e){if(!(e instanceof o))throw e;$.emit("error",e),t.push(J())}Y>X&&d()}return{type:"L20n",body:t}}function E(){var t=[];for(d();Y>X;)t.push(w()),Y>X&&d();return{type:"L20n",body:t}}function A(t){return F=t,X=0,Y=F.length,K()}function C(t,e){if(!$)throw new Error("Emitter not available");return $.addEventListener(t,e)}function _(t,e){if(!$)throw new Error("Emitter not available");return $.removeEventListener(t,e)}function k(){return T()}function L(t,e,r,n){for(var o,i,a=n();o="",d(),i=F.charAt(X),-1!==t[0].indexOf(i);){if(o+=i,++X,t.length>1)if(i=F.charAt(X),t[1]===i)++X,o+=i;else if(t[2])return--X,a;d(),a={type:e,operator:{type:r,token:o},left:a,right:n()}}return a}function O(t,e,r,n){var o=F.charCodeAt(X);return-1===t.indexOf(o)?n():(++X,d(),{type:e,operator:{type:r,token:String.fromCharCode(o)},argument:O(t,e,r,n)})}function T(){var t=j();if(d(),63!==F.charCodeAt(X))return t;++X,d();var e=k();if(d(),58!==F.charCodeAt(X))throw Z('Expected ":"');return++X,d(),{type:"ConditionalExpression",test:t,consequent:e,alternate:k()}}function j(){return L([["|"],"|",!0],"LogicalExpression","LogicalOperator",S)}function S(){return L([["&"],"&",!0],"LogicalExpression","Logicalperator",z)}function z(){return L([["=","!"],"=",!0],"BinaryExpression","BinaryOperator",I)}function I(){return L([["<",">"],"=",!1],"BinaryExpression","BinaryOperator",N)}function N(){return L([["+","-"]],"BinaryExpression","BinaryOperator",P)}function P(){return L([["%"]],"BinaryExpression","BinaryOperator",R)}function R(){return L([["*"]],"BinaryExpression","BinaryOperator",G)}function G(){return L([["/"]],"BinaryExpression","BinaryOperator",U)}function U(){return O([43,45,33],"UnaryExpression","UnaryOperator",q)}function D(t){return d(),{type:"CallExpression",callee:t,arguments:W(k,")")}}function M(t,e){if("ParenthesisExpression"!==t.type&&"Identifier"!==t.type&&"ThisExpression"!==t.type)throw Z("AttributeExpression must have Identifier, This or Parenthesis as left node");var r;if(e){if(d(),r=k(),d(),"]"!==F.charAt(X))throw Z('Expected "]"');return++X,{type:"AttributeExpression",expression:t,attribute:r,computed:!0}}return r=y(),{type:"AttributeExpression",expression:t,attribute:r,computed:!1}}function B(t,e){var r;if(e){if(d(),r=k(),d(),"]"!==F.charAt(X))throw Z('Expected "]"');return++X,{type:"PropertyExpression",expression:t,property:r,computed:!0}}return r=y(),{type:"PropertyExpression",expression:t,property:r,computed:!1}}function q(){for(var t,e=H();;)if(t=F.charCodeAt(X),46===t||91===t)++X,e=B(e,91===t);else if(58===t&&58===F.charCodeAt(X+1))X+=2,91===F.charCodeAt(X)?(++X,e=M(e,!0)):e=M(e,!1);else{if(40!==t)break;++X,e=D(e)}return e}function H(){if(40===F.charCodeAt(X)){++X,d();var t={type:"ParenthesisExpression",expression:k()};if(d(),41!==F.charCodeAt(X))throw Z('Expected ")"');return++X,t}return V()}function V(){for(var t=X,e=F.charCodeAt(t);e>47&&58>e;)e=F.charCodeAt(++t);if(t>X){var r=X;return X=t,{type:"Number",value:parseInt(F.slice(r,t),10)}}switch(e){case 39:case 34:case 123:case 91:return h();case 36:return v();case 64:return++X,{type:"GlobalsExpression",id:y()};case 126:return++X,{type:"ThisExpression"};default:return y()}}function W(t,e){var r;if(d(),F.charAt(X)===e)return++X,[];for(var n=[];;){if(n.push(t()),d(),r=F.charAt(X),","!==r){if(r===e){++X;break}throw Z('Expected "," or "'+e+'"')}++X,d()}return n}function Z(t,r){r===e&&(r=X);var n=F.lastIndexOf("<",r-1),i=F.lastIndexOf(">",r-1);n=i>n?i+1:n;var a=F.slice(n,r+10),s=t+" at pos "+r+': "'+a+'"';return new o(s,r,a)}function J(){var t,e=F.indexOf("<",X);return-1===e?(t={type:"JunkEntry",content:F.slice(X)},X=Y,t):(t={type:"JunkEntry",content:F.slice(X,e)},X=e,t)}this.parse=A,this.addEventListener=C,this.removeEventListener=_;var F,X,Y,$,K,Q=100;t?K=E:($=new i,K=x)}function o(t,e,r){this.name="ParserError",this.message=t,this.pos=e,this.context=r}var i=t("./events").EventEmitter;n.Error=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,r.Parser=n}),r("l20n/compiler",function(t,r){function n(){function t(t,e){e||(e={});for(var r,n=0;r=t.body[n];n++){var o=q[r.type];if(o)try{e[r.id.name]=new o(r,e)}catch(i){c(i)}}return e}function r(t){return M=t,!0}function n(t,e){return D.addEventListener(t,e)}function o(t,e){return D.removeEventListener(t,e)}function f(t,e,r,n){var o=new t(e,r,n);return D.emit("error",o),o}function h(t,e){this.id=t.id.name,this.env=e,this.local=t.local||!1,this.index=null,this.attributes=null,this.publicAttributes=null;var r;if(t.index)for(this.index=[],r=0;r<t.index.length;r++)this.index.push(_(t.index[r],this));if(t.attrs)for(this.attributes={},this.publicAttributes=[],r=0;r<t.attrs.length;r++){var n=t.attrs[r];this.attributes[n.key.name]=new p(n,this),n.local||this.publicAttributes.push(n.key.name)}this.value=t.value&&"String"===t.value.type?t.value.content:y(t.value,this,this.index)}function p(t,e){if(this.key=t.key.name,this.local=t.local||!1,this.index=null,t.index){this.index=[];for(var r=0;r<t.index.length;r++)this.index.push(_(t.index[r],this))}this.value=t.value&&"String"===t.value.type?t.value.content:y(t.value,e,this.index),this.entity=e}function d(t,e){this.id=t.id.name,this.env=e,this.local=t.local||!1,this.expression=y(t.expression,this),this.args=t.args}function v(t,e,r){if(!t)return null;if(!H[t.type])throw f("CompilationError","Unknown expression type"+t.type);return r&&(r=r.slice()),H[t.type](t,e,r)}function y(t,e,r){if(!t)return null;var n;return function(o,i,a){return n||(n=v(t,e,r)),n(o,i,a)}}function b(t,r,n){for(var o=!0;o;){c=void 0,o=!1;var i=t,s=r,u=n;if("string"==typeof i||"boolean"==typeof i||"number"==typeof i||!i)return i;if(i.value===e){if("function"!=typeof i){if(i.expression)throw new a("Uncalled macro: "+i.id);throw new a("Cannot resolve ctxdata or global of type "+typeof i)}var c=i(s,u);s=c[0],c=c[1],t=c,r=s,n=u,o=!0}else t=i.value,r=s,n=u,o=!0}}function g(t){var e=t.name;return function(t){if(!t.__env__.hasOwnProperty(e))throw new a("Reference to an unknown entry: "+e);return t={__this__:t.__env__[e],__env__:t.__env__},[t,t.__this__]}}function m(){return function(t){return[t,t.__this__]}}function w(t){var e=t.id.name;return function(t,r){if(t.hasOwnProperty(e))return t[e];if(!r||!r.hasOwnProperty(e))throw new a("Reference to an unknown variable: "+e);return[t,r[e]]}}function x(t){var e=t.id.name;return function(t){if(!M)throw new a("No globals set (tried @"+e+")");if(!M.hasOwnProperty(e))throw new a("Reference to an unknown global: "+e);var r;try{r=M[e].get()}catch(n){throw new a("Cannot evaluate global "+e)}return B.globals[e]=!0,[t,r]}}function E(t){return function(e){return[e,t.value]}}function A(t){return function(r,n,o){if(o!==e)throw new a("Cannot get property of a string: "+o);return[r,t.content]}}function C(t,r){for(var n=[],o=0;o<t.content.length;o++)n.push(v(t.content[o],r));return function(){var o=!1;return function(i,u,l){if(l!==e)throw new a("Cannot get property of a string: "+l);if(o)throw new a("Cyclic reference detected");o=!0;var f=[];try{for(var h=0;h<n.length;h++){var p=b(n[h],i,u);if("string"!=typeof p&&"number"!=typeof p)throw new a("Placeables must be strings or numbers");if(p.length>U)throw new a("Placeable has too many characters, maximum allowed is "+U);f.push(p)}}catch(d){throw c(d),new s(d.message,r,t.source)}finally{o=!1}return[i,f.join("")]}}()}function _(t,e){var r=v(t,e);return function(){var t=!1;return function(n,o){if(t)throw new a("Cyclic reference detected");t=!0;var i;try{i=b(r,n,o)}catch(s){if(s instanceof u)throw s;throw c(s),f(u,s.message,e)}finally{t=!1}return[n,i]}}()}function k(t,r,n){for(var o,i={},a=n?n.shift():e,s=0;s<t.content.length;s++){var c=t.content[s];i[c.key.name]=v(c.value,r,n),c["default"]&&(o=c.key.name)}return function(t,n,s){for(var c=[s,a,o],l=[],h=0;h<c.length;h++){var p=b(c[h],t,n);if(p!==e){if("string"!=typeof p)throw f(u,"Index must be a string",r);if(l.push(p),i.hasOwnProperty(p))return[t,i[p]]}}var d;throw d=l.length?'Hash key lookup failed (tried "'+l.join('", "')+'").':"Hash key lookup failed.",f(u,d,r)}}function L(t,e){if("-"===t)return function(t){if("number"!=typeof t)throw new a("The unary - operator takes a number");return-t};if("+"===t)return function(t){if("number"!=typeof t)throw new a("The unary + operator takes a number");return+t};if("!"===t)return function(t){if("boolean"!=typeof t)throw new a("The ! operator takes a boolean");return!t};throw f(i,"Unknown token: "+t,e)}function O(t,e){if("=="===t)return function(t,e){if(!("number"==typeof t&&"number"==typeof e||"string"==typeof t&&"string"==typeof e))throw new a("The == operator takes two numbers or two strings");return t===e};if("!="===t)return function(t,e){if(!("number"==typeof t&&"number"==typeof e||"string"==typeof t&&"string"==typeof e))throw new a("The != operator takes two numbers or two strings");return t!==e};if("<"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The < operator takes two numbers");return e>t};if("<="===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The <= operator takes two numbers");return e>=t};if(">"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The > operator takes two numbers");return t>e};if(">="===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The >= operator takes two numbers");return t>=e};if("+"===t)return function(t,e){if(!("number"==typeof t&&"number"==typeof e||"string"==typeof t&&"string"==typeof e))throw new a("The + operator takes two numbers or two strings");return t+e};if("-"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The - operator takes two numbers");return t-e};if("*"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The * operator takes two numbers");return t*e};if("/"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The / operator takes two numbers");if(0===e)throw new a("Division by zero not allowed.");return t/e};if("%"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The % operator takes two numbers");if(0===e)throw new a("Modulo zero not allowed.");return t%e};throw f(i,"Unknown token: "+t,e)}function T(t,e){if("&&"===t)return function(t,e){if("boolean"!=typeof t||"boolean"!=typeof e)throw new a("The && operator takes two booleans");return t&&e};if("||"===t)return function(t,e){if("boolean"!=typeof t||"boolean"!=typeof e)throw new a("The || operator takes two booleans");return t||e};throw f(i,"Unknown token: "+t,e)}function j(t,e){var r=L(t.operator.token,e),n=v(t.argument,e);return function(t,e){return[t,r(b(n,t,e))]}}function S(t,e){var r=v(t.left,e),n=O(t.operator.token,e),o=v(t.right,e);return function(t,e){return[t,n(b(r,t,e),b(o,t,e))]}}function z(t,e){var r=v(t.left,e),n=T(t.operator.token,e),o=v(t.right,e);return function(t,e){return[t,n(b(r,t,e),b(o,t,e))]}}function I(t,e){var r=v(t.test,e),n=v(t.consequent,e),o=v(t.alternate,e);return function(t,e){var i=b(r,t,e);if("boolean"!=typeof i)throw new a("Conditional expressions must test a boolean");return i===!0?n(t,e):o(t,e)}}function N(t,e){for(var r=v(t.callee,e),n=[],o=0;o<t.arguments.length;o++)n.push(v(t.arguments[o],e));return function(t,e){for(var o=[],i=0;i<n.length;i++)o.push(n[i](t,e));var s=r(t,e);if(t=s[0],s=s[1],!s.expression)throw new a("Expected a macro, got a non-callable.");return s._call(o,e)}}function P(t,r){var n=v(t.expression,r),o=t.computed?v(t.property,r):t.property.name;return function(t,r){var i=b(o,t,r);if("string"!=typeof i)throw new a("Property name must evaluate to a string: "+i);var s=n(t,r);if(t=s[0],s=s[1],s&&s.value!==e){if("function"!=typeof s.value)throw new a("Cannot get property of a "+typeof s.value+": "+i);return s.value(t,r,i)}if("function"==typeof s)return s(t,r,i);if(s&&s.expression)throw new a("Cannot get property of a macro: "+i);if("object"==typeof s){if(null===s)throw new a("Cannot get property of a null: "+i);if(Array.isArray(s))throw new a("Cannot get property of an array: "+i);if(!s.hasOwnProperty(i))throw new a(i+" is not defined on the object.");return[t,s[i]]}throw new a("Cannot get property of a "+typeof s+": "+i)}}function R(t,e){var r=v(t.expression,e),n=t.computed?v(t.attribute,e):t.attribute.name;return function(t,e){var o=b(n,t,e),i=r(t,e);if(t=i[0],i=i[1],!i.attributes)throw new a("Cannot get attribute of a non-entity: "+o);if(!i.attributes.hasOwnProperty(o))throw new a(i.id+" has no attribute "+o);return[t,i.attributes[o]]}}function G(t,e){return v(t.expression,e)}this.compile=t,this.setGlobals=r,this.addEventListener=n,this.removeEventListener=o;var U=2500,D=new l,M=null,B={globals:{}},q={Entity:h,Macro:d};h.prototype.getString=function(t){try{var e={__this__:this,__env__:this.env};return b(this.value,e,t)}catch(r){throw c(r),r instanceof s&&D.emit("error",r),r}},h.prototype.get=function(t){B.globals={};var e={value:this.getString(t),attributes:{}};if(this.publicAttributes){e.attributes={};for(var r,n=0;r=this.publicAttributes[n];n++)e.attributes[r]=this.attributes[r].getString(t)}return e.globals=B.globals,e},p.prototype.getString=function(t){try{var e={__this__:this.entity,__env__:this.entity.env};return b(this.value,e,t)}catch(r){throw c(r),r instanceof s&&D.emit("error",r),r}},d.prototype._call=function(t,e){var r={__this__:this,__env__:this.env};if(this.args.length!==t.length)throw new a(this.id+"() takes exactly "+this.args.length+" argument(s) ("+t.length+" given)");for(var n=0;n<this.args.length;n++)r[this.args[n].id.name]=t[n];var o=this.expression(r,e);return r=o[0],o=o[1],[r,b(o,r,e)]};var H={Identifier:g,ThisExpression:m,VariableExpression:w,GlobalsExpression:x,Number:E,String:A,Hash:k,HashItem:v,ComplexString:C,UnaryExpression:j,BinaryExpression:S,LogicalExpression:z,ConditionalExpression:I,CallExpression:N,PropertyExpression:P,AttributeExpression:R,ParenthesisExpression:G}}function o(t){this.name="CompilerError",this.message=t}function i(t,e){o.call(this,t),this.name="CompilationError",this.entry=e.id}function a(t){o.call(this,t),this.name="RuntimeError"}function s(t,e,r){a.call(this,t),this.name="ValueError",this.entry=e.id,this.source=r}function u(t,e){a.call(this,t),this.name="IndexError",this.entry=e.id}function c(t){if(!(t instanceof o))throw t}var l=t("./events").EventEmitter;n.Error=o,n.CompilationError=i,n.RuntimeError=a,n.ValueError=s,n.IndexError=u,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,a.prototype=Object.create(o.prototype),a.prototype.constructor=a,s.prototype=Object.create(a.prototype),s.prototype.constructor=s,u.prototype=Object.create(a.prototype),u.prototype.constructor=u,r.Compiler=n}),r("l20n/retranslation",function(t,e){function r(){function t(t){var e=new t;this.globals[e.id]=e,e.activate&&(a[e.id]=0,e.addEventListener("change",function(t){for(var r=0;r<i.length;r++)i[r]&&-1!==i[r].globals.indexOf(t)&&i[r].callback({global:e.id})}))}function e(t,e){var r,n;for(r=0;r<s.length;r++)if(s[r].id===t.id){n=!0;break}n?e&&(s[r]=t):s.push(t);var o;for(r=0;r<i.length;r++)if(i[r]&&i[r].id===t.id){o=i[r];break}var u;if(o)if(e)o.callback=t.callback,u=t.globals.filter(function(t){return this.globals[t].activate&&-1===o.globals.indexOf(t)},this),u.forEach(function(t){a[t]++,this.globals[t].activate()},this),o.globals=o.globals.concat(u);else if(0===t.globals.length)delete i[r];
else{u=t.globals.filter(function(t){return this.globals[t].activate&&-1===o.globals.indexOf(t)},this),u.forEach(function(t){a[t]++,this.globals[t].activate()},this);var c=o.globals.filter(function(e){return this.globals[e].activate&&-1===t.globals.indexOf(e)},this);c.forEach(function(t){a[t]--,0===a[t]&&this.globals[t].deactivate()},this),o.globals=t.globals}else 0!==t.globals.length&&(i.push(t),t.globals.forEach(function(t){this.globals[t].activate&&(a[t]++,this.globals[t].activate())},this))}function n(t){for(var e,r=-1,n=0;n<i.length;n++)if(i[n]&&i[n].id===t){e=i[n],r=n;break}if(e)for(e.globals.forEach(function(t){this.globals[t].activate&&(a[t]--,0===a[t]&&this.globals[t].deactivate())},this),i.splice(r,1),n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}}function o(t){for(var e=0;e<s.length;e++)s[e].callback({locales:t})}var i=[],a={},s=[];this.bindGet=e,this.unbindGet=n,this.all=o,this.globals={},r._constructors.forEach(function(e){t.call(this,e)},this)}r._constructors=[],r.registerGlobal=function(t){r._constructors.push(t)},r.deregisterGlobal=function(t){var e=r._constructors.indexOf(t);-1!==e&&r._constructors.splice(e,1)},e.RetranslationManager=r}),r("l20n/platform/globals",function(e,r){function n(){this.id=null,this._emitter=new s,this.value=null,this.isActive=!1}function o(){function e(){return{width:{px:document.body.clientWidth}}}function r(){o.value=e(),o._emitter.emit("change",o.id)}n.call(this),this.id="screen",this._get=e,this.activate=function(){this.isActive||(t.addEventListener("resize",r),this.isActive=!0)},this.deactivate=function(){t.removeEventListener("resize",r),this.value=null,this.isActive=!1};var o=this}function i(){function t(){return/^MacIntel/.test(navigator.platform)?"mac":/^Linux/.test(navigator.platform)?"linux":/^Win/.test(navigator.platform)?"win":"unknown"}n.call(this),this.id="os",this.get=t}function a(){function t(){var t=new Date;return t.getHours()}function e(){var t=new Date;t.getHours()!==r.value&&(r.value=t.getHours(),r._emitter.emit("change",r.id))}n.call(this),this.id="hour",this._get=t,this.activate=function(){if(!this.isActive){var t=new Date;i=setTimeout(function(){e(),i=setInterval(e,o)},o-t.getTime()%o),this.isActive=!0}},this.deactivate=function(){clearInterval(i),this.value=null,this.isActive=!1};var r=this,o=36e5,i=null}var s=e("../events").EventEmitter,u=e("../retranslation").RetranslationManager;n.prototype._get=function(){throw new Error("Not implemented")},n.prototype.get=function(){return this.value&&this.isActive||(this.value=this._get()),this.value},n.prototype.addEventListener=function(t,e){if("change"!==t)throw"Unknown event type";this._emitter.addEventListener(t,e)},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,i.prototype=Object.create(n.prototype),i.prototype.constructor=i,a.prototype=Object.create(n.prototype),a.prototype.constructor=a,u.registerGlobal(o),u.registerGlobal(i),u.registerGlobal(a),r.Global=n}),r("l20n/platform/io",function(t,e){function r(t){this.name="IOError",this.message=t}e.load=function(t,e,n){var o=new XMLHttpRequest;o.overrideMimeType&&o.overrideMimeType("text/plain"),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status||0===o.status)e(null,o.responseText);else{var n=new r("Not found: "+t);e(n)}},o.open("GET",t,!n),o.send("")},r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,e.Error=r}),r("l20n/intl",function(t,r){function n(t){if(!d.test(t))return!1;if(t.startsWith("x-"))return!0;var e=t.indexOf("-x-");return-1!==e&&(t=t.substring(0,e)),!v.test(t)&&!y.test(t)}function o(t){if(t=t.toLowerCase(),f&&f.hasOwnProperty(t))return f[t];for(var e=t.split("-"),r=0;r<e.length;){var n=e[r];if(1===n.length&&(r>0||"x"===n))break;4===n.length?n=n[0].toUpperCase()+n.substring(1):0!==r&&2===n.length&&(n=n.toUpperCase()),h.hasOwnProperty(n)?n=h[n]:p.hasOwnProperty(n)&&(n=p[n].preferred,1===r&&p[n].prefix===e[0]&&(e.shift(),r--)),e[r]=n,r++}for(var o=e.slice(0,r).join("-"),i=[];r<e.length&&"x"!==e[r];){var a=r;for(r++;r<e.length&&e[r].length>1;)r++;var s=sybtags.slice(a,r).join("-");i.push(s)}i.sort();var u="";r<e.length&&(u=e.slice(r).join("-"));var c=o;return i.length>0&&(c+="-"+i.join("-")),u.length>0&&(c.length>0?c+="-"+u:c=u),c}function i(t){if(t===e)return[];var r=[];"string"==typeof t&&(t=[t]);for(var i=t,a=i.length,s=0;a>s;){var u=s in i;if(u){var c=i[s];"string"!=typeof c&&"object"!=typeof c&&ThrowError(JSMSG_INVALID_LOCALES_ELEMENT);var l=c;n(l)||ThrowError(JSMSG_INVALID_LANGUAGE_TAG,l),l=o(l),-1===r.indexOf(l)&&r.push(l)}s++}return r}function a(t,r){for(var n=r;;){if(-1!==t.indexOf(n))return n;var o=n.lastIndexOf("-");if(-1===o)return e;o>=2&&"-"===n[o-2]&&(o-=2),n=n.substring(0,o)}}function s(t,r){for(var n=r.length,o=[],i=0;n>i;){var s=r[i],u=s.replace(l,""),c=a(t,u);c!==e&&o.push(c),i++}return o.slice(0)}function u(t,e,r){t=i(t),e=i(e);var n=s(t,e);return r?(r=o(r),-1===n.indexOf(r)&&n.push(r),n):n}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(t,e){return e=e||0,this.indexOf(t,e)===e}});var c="-u(-[a-z0-9]{2,8})+",l=(new RegExp(c),new RegExp(c,"g")),f={},h={},p={},d=function(){var t="[a-zA-Z]",e="[0-9]",r="(?:"+t+"|"+e+")",n="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)",o="(?:en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)",i="(?:"+o+"|"+n+")",a="(?:x(?:-[a-z0-9]{1,8})+)",s="(?:"+e+"|[A-WY-Za-wy-z])",u="(?:"+s+"(?:-"+r+"{2,8})+)",c="(?:"+r+"{5,8}|(?:"+e+r+"{3}))",l="(?:"+t+"{2}|"+e+"{3})",f="(?:"+t+"{4})",h="(?:"+t+"{3}(?:-"+t+"{3}){0,2})",p="(?:"+t+"{2,3}(?:-"+h+")?|"+t+"{4}|"+t+"{5,8})",d=p+"(?:-"+f+")?(?:-"+l+")?(?:-"+c+")*(?:-"+u+")*(?:-"+a+")?",v="^(?:"+d+"|"+a+"|"+i+")$";return new RegExp(v,"i")}(),v=function(){var t="[a-zA-Z]",e="[0-9]",r="(?:"+t+"|"+e+")",n="(?:"+r+"{5,8}|(?:"+e+r+"{3}))",o="(?:"+r+"{2,8}-)+("+n+")-(?:"+r+"{2,8}-)*\\1(?!"+r+")";return new RegExp(o)}(),y=function(){var t="[a-zA-Z]",e="[0-9]",r="(?:"+t+"|"+e+")",n="(?:"+e+"|[A-WY-Za-wy-z])",o="-("+n+")-(?:"+r+"+-)*\\1(?!"+r+")";return new RegExp(o)}();r.Intl={prioritizeLocales:u}}),t.L20n=s("l20n"),s("l20n/html")}(window);